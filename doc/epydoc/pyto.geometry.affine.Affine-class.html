<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pyto.geometry.affine.Affine</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pyto-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Pyto</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pyto-module.html">Package&nbsp;pyto</a> ::
        <a href="pyto.geometry-module.html">Package&nbsp;geometry</a> ::
        <a href="pyto.geometry.affine-module.html">Module&nbsp;affine</a> ::
        Class&nbsp;Affine
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="pyto.geometry.affine.Affine-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class Affine</h1><p class="nomargin-top"><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_pyto_geo" name="uml_class_diagram_for_pyto_geo">
<area shape="rect" id="node1_20" href="pyto.geometry.affine.Affine-class.html#parity_axis" title="pyto.geometry.affine.Affine.parity_axis" alt="" coords="49,29,451,49"/>
<area shape="rect" id="node1_21" href="pyto.geometry.affine.Affine-class.html#ndim" title="N dimensions" alt="" coords="49,49,451,69"/>
<area shape="rect" id="node1_22" href="pyto.geometry.affine.Affine-class.html#scale" title="scale" alt="" coords="49,69,451,89"/>
<area shape="rect" id="node1_23" href="pyto.geometry.affine.Affine-class.html#parity" title="Parity" alt="" coords="49,89,451,109"/>
<area shape="rect" id="node1_24" href="pyto.geometry.affine.Affine-class.html#translation" title="Translation." alt="" coords="49,109,451,129"/>
<area shape="rect" id="node1_25" href="pyto.geometry.affine.Affine-class.html#rmsError" title="Root mean square error" alt="" coords="49,129,451,149"/>
<area shape="rect" id="node1_26" href="pyto.geometry.affine.Affine-class.html#__init__" title="Sets self.gl to arg gl." alt="" coords="49,152,451,172"/>
<area shape="rect" id="node1_27" href="pyto.geometry.affine.Affine-class.html#initializeParams" title="Sets all transformation parameters (q, p, s, m, u, v) to None." alt="" coords="49,172,451,192"/>
<area shape="rect" id="node1_28" href="pyto.geometry.affine.Affine-class.html#identity" title="Returnes an identity object of this class, that is a transformation that &#160;leaves all vectors invariant." alt="" coords="49,192,451,212"/>
<area shape="rect" id="node1_29" href="pyto.geometry.affine.Affine-class.html#makeS" title="Returns scale transformation in the matrix form corresponding to 1D array &#160;scale." alt="" coords="49,212,451,232"/>
<area shape="rect" id="node1_30" href="pyto.geometry.affine.Affine-class.html#makeP" title="Returns parity matrix corresponding to arg parity." alt="" coords="49,232,451,252"/>
<area shape="rect" id="node1_31" href="pyto.geometry.affine.Affine-class.html#makeD" title="Returns d (translation) array." alt="" coords="49,252,451,272"/>
<area shape="rect" id="node1_32" href="pyto.geometry.affine.Affine-class.html#getNdim" title="pyto.geometry.affine.Affine.getNdim" alt="" coords="49,272,451,292"/>
<area shape="rect" id="node1_33" href="pyto.geometry.affine.Affine-class.html#setNdim" title="Sets ndim" alt="" coords="49,292,451,312"/>
<area shape="rect" id="node1_34" href="pyto.geometry.affine.Affine-class.html#getScale" title="Extracts and returns scale." alt="" coords="49,312,451,332"/>
<area shape="rect" id="node1_35" href="pyto.geometry.affine.Affine-class.html#setScale" title="Sets scale and (re)composes Gl with all other parameters unchanged" alt="" coords="49,332,451,352"/>
<area shape="rect" id="node1_36" href="pyto.geometry.affine.Affine-class.html#getParity" title="Extracts and returns parity." alt="" coords="49,352,451,372"/>
<area shape="rect" id="node1_37" href="pyto.geometry.affine.Affine-class.html#getTranslation" title="Translation vector." alt="" coords="49,372,451,392"/>
<area shape="rect" id="node1_38" href="pyto.geometry.affine.Affine-class.html#getRMSError" title="Root mean square of the error." alt="" coords="49,392,451,412"/>
<area shape="rect" id="node1_39" href="pyto.geometry.affine.Affine-class.html#removeMasked" title="Makes a mask that combine all masks and removes points from arrays that are masked by the mask." alt="" coords="49,432,451,452"/>
<area shape="rect" id="node1" href="pyto.geometry.affine.Affine-class.html" title="Finds and preforms affine transformation (general linear transformation followed by translation) on points (vectors) in an arbitrary dimensional space." alt="" coords="37,5,462,459"/>
<area shape="rect" id="node2" href="pyto.geometry.affine_3d.Affine3D-class.html" title="Finds and preforms affine transformation (general linear transformation followed by translation) on points (vectors) in 3D." alt="" coords="5,477,149,516"/>
<area shape="rect" id="node3" href="pyto.geometry.affine_2d.Affine2D-class.html" title="Finds and preforms affine transformation (general linear transformation followed by translation) on points (vectors) in 2D." alt="" coords="179,477,323,516"/>
<area shape="rect" id="node4" href="pyto.geometry.rigid_3d.Rigid3D-class.html" title="Rotations in this class are such that points (vectors) are rotated and the coordinate system stays fixed." alt="" coords="353,477,485,516"/>
</map>
  <img src="uml_class_diagram_for_pyto_geo.gif" alt='' usemap="#uml_class_diagram_for_pyto_geo" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<pre class="literalblock">

Finds and preforms affine transformation (general linear transformation 
followed by translation) on points (vectors) in an arbitrary 
dimensional space.

The transformation that transforms points x to points y has the following 
form:

  y = gl x + d

where:

  gl = q s p m

Main methods:

  - find(): finds a transformation between two sets of points
  - findTwoStep(): finds a transformation between two sets of points in 
  two steps
  - findTranslation(): finds a translation between two sets of points
  - decompose(): decomposes (factorizes) gl
  - composeGl(): makes gl from its decomposition, opposite of decompose()
  - identity(): makes the identity transformation
  - transform(): transforms a (set of) point(s)
  - transformArray: transforms array (image)
  - inverse(): calculates inverse transformation
  - compose(): composition of two transformations

Transformation attributes (see formulas above):

  - d: translation vector
  - gl: general linear transformation matrix
  - q, u, v: rotation matrices
  - s: scaling matrix (diagonal, &gt;=0)
  - scale: vector of scaling parameters (diagonal elements of s)
  - p: parity matrix (diagonal, the element self.parity_axis 
  can be +1 or -1, other diagonal elements +1)
  - parity: parity (+1 or -1)
  - m: shear matrix (upper-triangular)
  - order: decomposition type. It is advisable not to change it directly
  (because this would make transformation attributes inconsistent with 
  attribute order) but to set it via instantiation or change using
  decompose().

Attributes related to finding a transformation:
  - error: error of transformation for all points
  - rmsError: root mean square error of the transformation
  - rmsErrorEst: estimate of rmsError, used when error can not be 
  calculated directly, for example for transformations formed as a 
  composition of two transformations (whose error or rmsError are known), 
  see composition() method.

Other attributes:
  - parity_axis: position of element in self.p that can be -1
  - param_names: (list) names of all transformation parameters
  - xy_axes: order of axes in matrices specifying points, can be
  'point_dim' (default, so for n points in d dimensions the points 
  matrixs hape is nxd) or 'dim_point' (points shape is dxn).

</pre>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">gl</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">d</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">qpsm</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">xy_axes</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">point_dim</code><code class="variable-quote">'</code></span>)</span><br />
      Sets self.gl to arg gl.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#initializeParams" class="summary-sig-name">initializeParams</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Sets all transformation parameters (q, p, s, m, u, v) to None.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.initializeParams">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="getNdim"></a><span class="summary-sig-name">getNdim</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.getNdim">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="setNdim"></a><span class="summary-sig-name">setNdim</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">ndim</span>)</span><br />
      Sets ndim</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.setNdim">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#getScale" class="summary-sig-name">getScale</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Extracts and returns scale.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.getScale">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#setScale" class="summary-sig-name">setScale</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">scale</span>)</span><br />
      Sets scale and (re)composes Gl with all other parameters unchanged</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.setScale">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#getParity" class="summary-sig-name">getParity</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Extracts and returns parity.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.getParity">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="getTranslation"></a><span class="summary-sig-name">getTranslation</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Translation vector.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.getTranslation">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#getRMSError" class="summary-sig-name">getRMSError</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Root mean square of the error.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.getRMSError">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#transform" class="summary-sig-name">transform</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">x</span>,
        <span class="summary-sig-arg">gl</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">d</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">origin</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">xy_axes</span>=<span class="summary-sig-default">None</span>)</span><br />
      Applies transformation defined by gl and d to points x.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.transform">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#transformArray" class="summary-sig-name">transformArray</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">array</span>,
        <span class="summary-sig-arg">origin</span>,
        <span class="summary-sig-arg">return_grid</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">output</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default">1</span>,
        <span class="summary-sig-arg">mode</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">constant</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">cval</span>=<span class="summary-sig-default">0.0</span>,
        <span class="summary-sig-arg">prefilter</span>=<span class="summary-sig-default">False</span>)</span><br />
      Transformes the given array, typically an image (arg array) according
      to the transformation of this instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.transformArray">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#_transformArray_old" class="summary-sig-name" onclick="show_private();">_transformArray_old</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">array</span>,
        <span class="summary-sig-arg">origin</span>,
        <span class="summary-sig-arg">return_grid</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">output</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default">1</span>,
        <span class="summary-sig-arg">mode</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">constant</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">cval</span>=<span class="summary-sig-default">0.0</span>,
        <span class="summary-sig-arg">prefilter</span>=<span class="summary-sig-default">False</span>)</span><br />
      Transformes the given array, typically an image (arg array) according
      to the transformation of this instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine._transformArray_old">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#decompose" class="summary-sig-name">decompose</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">gl</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default">None</span>)</span><br />
      Decomposes gl using QR or singular value decomposition as follows:</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.decompose">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#decomposeQR" class="summary-sig-name">decomposeQR</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">gl</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">qr</code><code class="variable-quote">'</code></span>)</span><br />
      Decomposes gl using QR decomposition into:</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.decomposeQR">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#decomposeSV" class="summary-sig-name">decomposeSV</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">gl</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">usv</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">correction</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">u</code><code class="variable-quote">'</code></span>)</span><br />
      Decompose gl using singular value decomposition, so that:</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.decomposeSV">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#composeGl" class="summary-sig-name">composeGl</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">q</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">p</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">s</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">m</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">u</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">v</span>=<span class="summary-sig-default">None</span>)</span><br />
      Makes general linear transformation matrix (inverse of 
      self.decompose()).</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.composeGl">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="composeQR"></a><span class="summary-sig-name">composeQR</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">q</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">p</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">s</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">m</span>=<span class="summary-sig-default">None</span>)</span><br />
      Makes general linear transformation from elements of 'qpsm' of 'psmq'
      decomposition.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.composeQR">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="composeSV"></a><span class="summary-sig-name">composeSV</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">u</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">p</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">s</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">v</span>=<span class="summary-sig-default">None</span>)</span><br />
      Makes general linear transformation from elements of 'usv' 
      decomposition.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.composeSV">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#inverse" class="summary-sig-name">inverse</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">gl</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">d</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">subgl</span>=<span class="summary-sig-default">None</span>)</span><br />
      Finds inverse transformation of this instance or of the transformation
specified by args gl and d.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.inverse">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== CLASS METHODS ==================== -->
<a name="section-ClassMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#identity" class="summary-sig-name">identity</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">ndim</span>)</span><br />
      Returnes an identity object of this class, that is a transformation 
      that leaves all vectors invariant.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.identity">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#makeS" class="summary-sig-name">makeS</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">scale</span>,
        <span class="summary-sig-arg">ndim</span>)</span><br />
      Returns scale transformation in the matrix form corresponding to 1D 
      array scale.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.makeS">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#makeP" class="summary-sig-name">makeP</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">parity</span>,
        <span class="summary-sig-arg">ndim</span>,
        <span class="summary-sig-arg">axis</span>=<span class="summary-sig-default">-1</span>)</span><br />
      Returns parity matrix corresponding to arg parity.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.makeP">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#makeD" class="summary-sig-name">makeD</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">d</span>,
        <span class="summary-sig-arg">ndim</span>=<span class="summary-sig-default">None</span>)</span><br />
      Returns d (translation) array.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.makeD">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#find" class="summary-sig-name">find</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">x</span>,
        <span class="summary-sig-arg">y</span>,
        <span class="summary-sig-arg">type_</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">gl</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">qpsm</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">xy_axes</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">point_dim</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">x_ref</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">cm</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">y_ref</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">cm</code><code class="variable-quote">'</code></span>)</span><br />
      Finds affine transformation (general linear transformation folowed by a
translation) that minimizes square error for transforming points x to 
points y.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.find">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#findTwoStep" class="summary-sig-name">findTwoStep</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">x</span>,
        <span class="summary-sig-arg">y</span>,
        <span class="summary-sig-arg">x_gl</span>,
        <span class="summary-sig-arg">y_gl</span>,
        <span class="summary-sig-arg">type_</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">gl</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">qpsm</code><code class="variable-quote">'</code></span>)</span><br />
      Find affine transformation (like find()) in two steps.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.findTwoStep">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#findTranslation" class="summary-sig-name">findTranslation</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">x</span>,
        <span class="summary-sig-arg">y</span>,
        <span class="summary-sig-arg">x_mask</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">y_mask</span>=<span class="summary-sig-default">None</span>)</span><br />
      Finds translation between initial point (coordinates) x and final 
      point</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.findTranslation">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#compose" class="summary-sig-name">compose</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">t_1</span>,
        <span class="summary-sig-arg">t_2</span>,
        <span class="summary-sig-arg">subgl</span>=<span class="summary-sig-default">None</span>)</span><br />
      Finds composition of transformations t_1 and t_2.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.compose">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#removeMasked" class="summary-sig-name">removeMasked</a>(<span class="summary-sig-arg">cls</span>,
        <span class="summary-sig-arg">arrays</span>,
        <span class="summary-sig-arg">masks</span>=<span class="summary-sig-default">None</span>)</span><br />
      Makes a mask that combine all masks and removes points from arrays 
      that are masked by the mask.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.removeMasked">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="parity_axis"></a><span class="summary-name">parity_axis</span> = <code title="-1">-1</code>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pyto.geometry.affine.Affine-class.html#ndim" class="summary-name">ndim</a><br />
      N dimensions
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pyto.geometry.affine.Affine-class.html#scale" class="summary-name">scale</a><br />
      scale
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pyto.geometry.affine.Affine-class.html#parity" class="summary-name">parity</a><br />
      Parity
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pyto.geometry.affine.Affine-class.html#translation" class="summary-name">translation</a><br />
      Translation.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="pyto.geometry.affine.Affine-class.html#rmsError" class="summary-name">rmsError</a><br />
      Root mean square error
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">gl</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">d</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">order</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">qpsm</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">xy_axes</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">point_dim</code><code class="variable-quote">'</code></span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Sets self.gl to arg gl.</p>
  <p>If arg d is None, or 0, and gl is not None, self.d is set to 
  numpy.array([0, 0, ...]) with the correct length. Otherwise self.d is set
  to arg d</p>
  <p>If the arg xy_axes is 'point_dim' / 'dim_point', points used in this 
  instance should be specified as n_point x n_dim / n_dim x n_point 
  matrices.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      gl: (numpy.ndarray of shape (ndim, ndim)) general linear 
      transormation matrix
    </li>
    <li>
      d: (numpy.ndarray of shape ndim) translation
    </li>
    <li>
      order: decomposition order
    </li>
    <li>
      xy_axes: order of axes in matrices representing points, can be 
      'point_dim' (default) or 'dim_point'
    </li>
  </ul>
  <dl class="fields">
    <dt>Overrides:
        object.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="initializeParams"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">initializeParams</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.initializeParams">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Sets all transformation parameters (q, p, s, m, u, v) to None.</p>
  <p>Transformation parameters are listed in self.param_names.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="identity"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">identity</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">ndim</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.identity">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returnes an identity object of this class, that is a transformation 
  that leaves all vectors invariant.</p>
  <p>Argument:</p>
  <ul>
    <li>
      ndim: number of dimensions
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="makeS"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">makeS</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">scale</span>,
        <span class="sig-arg">ndim</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.makeS">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns scale transformation in the matrix form corresponding to 1D 
  array scale.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      scale: can be given as an 1d array (or a list), or as a single number
      in which case the scale is the same in all directions
    </li>
    <li>
      ndim: number of dimensions
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="makeP"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">makeP</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">parity</span>,
        <span class="sig-arg">ndim</span>,
        <span class="sig-arg">axis</span>=<span class="sig-default">-1</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.makeP">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns parity matrix corresponding to arg parity.</p>
  <p>If parity is -1, the element of the parity matrix corresponding to 
  axis is set to -1 (all other are 1).</p>
  <p>Arguments:</p>
  <ul>
    <li>
      parity: can be 1 or -1
    </li>
    <li>
      axis: axis denoting parity element that can be -1
    </li>
    <li>
      ndim: number of dimensions
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="makeD"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">makeD</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">d</span>,
        <span class="sig-arg">ndim</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.makeD">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns d (translation) array.</p>
  <p>If argument d is None, it is taken to be 0.</p>
  <p>If d is a single number, it is expanded to have the same translation 
  in all dirrections, provided that arg ndim is specified. Otherwise, the 
  same single number is returned.</p>
  <p>Important: ndim has to be specified, otherwise d array can not be 
  made. Therefore, if arg ndim is None and arg d is None or a single, arg d
  can not be expanded.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      d: (single number) translation
    </li>
    <li>
      ndim: number of dimensions
    </li>
  </ul>
  <p>Returns: (ndarray) translation vector or in case arg ndim is None and 
  arg d is a single number or None, a single number is returned</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="getScale"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getScale</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.getScale">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Extracts and returns scale. First tries to get scale from self.s. If 
  self.s doesn't exist decomposes this transformation 
  (self.decompose()).</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="setScale"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setScale</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">scale</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.setScale">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Sets scale and (re)composes Gl with all other parameters unchanged</p>
  <p>Argument:</p>
  <ul>
    <li>
      scale: (1d-array) scale
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="getParity"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getParity</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.getParity">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Extracts and returns parity. First tries to get parity from self.p. If
  self.p doesn't exist, calculates parity from det(self.gl).</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="getRMSError"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getRMSError</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.getRMSError">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Root mean square of the error.</p>
  <p>First tries to calculate it from self.error. If self.error is not 
  defined, returns self._rmsError or None if it doesn't exist)</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="find"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">find</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">x</span>,
        <span class="sig-arg">y</span>,
        <span class="sig-arg">type_</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">gl</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">order</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">qpsm</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">xy_axes</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">point_dim</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">x_ref</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">cm</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">y_ref</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">cm</code><code class="variable-quote">'</code></span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.find">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Finds affine transformation (general linear transformation folowed by a
translation) that minimizes square error for transforming points x to 
points y. The transformation has the form

  y = gl x + d,     gl = q s p m                                 (1)

where d is translation vector and q, s, p and m are rotation, scaling,
parity and shear matrices, respectivly. 

In 2D, if arg type_ is 'rs' (as opposed to the default 'gl'), instead 
of optimizing all parameters of Gl transformation, only rotation and
one scale are optimized. See Affine2D.find() for more info.

In the default mode (x_ref='cm' and y_ref='cm') the parameters are
calculated by minimizing square error to get gl from:

  y - y_cm = gl (x - x_cm)   and   d = y_cm - gl x_cm

where x_cm and y_cm are the centers of mass for x and y respectivly.
In this case the square error of eq 1 is minimized

In case args x_ref and y_ref are coordinates, gl is determined by
minimizing square error in:

  y - y_ref = gl (x - x_ref)   and d = y_ref - gl x_ref

Note that in this case the parameters found do not minimize the error
of eq 1.

In both cases general linear transformation (matrix gl) is calculated 
using scipy.linalg.lstsq().

Only the points that are not masked neither in x_mask nor in y_mask are
used. (probably not needed at all)

Arguments:
  - x, y: sets of points, both having shape (n_points, n_dim)
  - x_ref, y_ref: (ndarray) coordinates of reference points, or 'cm' to
  use center of mass
  - xy_axes: indicates the order of axes in x and y; can be 'point_dim'
so that x and y shape is n_points x n_dim or 'dim_point' for 
x_dim x n_points
  - type: transformation type ('gl' or 'rs')
  - order: gl decomposition order (see decompose())

Returns the transformation found as an instance of class cls, with 
following attributes:
  - gl: general linear transformation matrix
  - d: translation vector
  - q, p, s, m: rotation, parity, scale and shear matrices 
  - error: difference between y and transformed x values
  - resids, rank, singular: values returned from scipy.linalg.lstsq
  - xy_axes: same as arg xy_axes
  - _xPrime: x - x_ref
  - _yPrime: y - y_ref
  - type_: type of the optimization, 'gl' to find Gl transformation
  that optimizes the square error, or 'rs' to find the best rotation 
  and one scale (currently implemented for 2D transformations only).
  In any case the translation is also found.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="findTwoStep"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">findTwoStep</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">x</span>,
        <span class="sig-arg">y</span>,
        <span class="sig-arg">x_gl</span>,
        <span class="sig-arg">y_gl</span>,
        <span class="sig-arg">type_</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">gl</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">order</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">qpsm</code><code class="variable-quote">'</code></span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.findTwoStep">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Find affine transformation (like find()) in two steps. Useful when 
  only few points x and y exist that are related by the full transformation
  (Gl and translation), but there are other points x_gl and y_gl which are 
  related by a transformation having the same Gl but a different 
  translation.</p>
  <p>In the first step, coordinates x_gl and y_gl are used to find Gl (see 
  find() for details). In the second step, points Gl(x) and y are used to 
  find the translation part (see findTranslation() for details.</p>
  <p>The final transformation is obtained by the composition of the two 
  transformations obtained above. Consequently, attributes error and 
  rmsError are not defined, but rmsErrorEst is.</p>
  <p>Returns new transformation.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="findTranslation"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">findTranslation</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">x</span>,
        <span class="sig-arg">y</span>,
        <span class="sig-arg">x_mask</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">y_mask</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.findTranslation">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Finds translation between initial point (coordinates) x and final 
  point</p>
  <p>Arguments:</p>
  <ul>
    <li>
      x, y: sets of points, both having shape (n_points, n_dim)
    </li>
    <li>
      x_mask, y_masks: masked (not used) points, vectors of length n_points
    </li>
  </ul>
  <p>Returns an instance of this class that has the calculated translation.
  All other tranformation parameters have identity values.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="transform"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">transform</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">x</span>,
        <span class="sig-arg">gl</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">d</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">origin</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">xy_axes</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.transform">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Applies transformation defined by gl and d to points x. The gl 
  transformation is performed around arg origin.</p>
  <p>If args gl or d are None self.gl and self.d are used.</p>
  <p>If the arg xy_axes is 'point_dim' / 'dim_point', points (arg x) need 
  to be specified as n_point x n_dim / n_dim x n_point matrices.</p>
  <p>If the arg xy_axes is 'mgrid', the input points (arg x) have to be in 
  the dense mesh grid form, as returned by numpy.mgrid() and 
  numpy.meshgrid(sparse=False).</p>
  <p>In all cases the returned points have the same form as the input 
  points (arg x).</p>
  <p>Arguments:</p>
  <ul>
    <li>
      x: coordinates of one or more points
    </li>
    <li>
      gl: matrix representation of general linear transformation
    </li>
    <li>
      d: translation vector (0 means 0 in each coordinate)
    </li>
    <li>
      origin: coordinates of the origin for the gl transformation, None or 
      0 for origin at the coordinate system origin, otherwise list, ndarray
      or tuple
    </li>
    <li>
      xy_axes: order of axes in matrices representing points
    </li>
  </ul>
  <p>Returns:</p>
  <ul>
    <li>
      transformed points in the same form as x, or None if x is None or has
      no elements
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="transformArray"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">transformArray</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">array</span>,
        <span class="sig-arg">origin</span>,
        <span class="sig-arg">return_grid</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">output</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">order</span>=<span class="sig-default">1</span>,
        <span class="sig-arg">mode</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">constant</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">cval</span>=<span class="sig-default">0.0</span>,
        <span class="sig-arg">prefilter</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.transformArray">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Transformes the given array, typically an image (arg array) according 
  to the transformation of this instance. Rotation center is given by arg 
  origin.</p>
  <p>Uses transform() method to (inversly) transform the complete index 
  (coordinate) grid corresponding to the given array to make the 
  transformed grid.</p>
  <p>Then it calls scipy.ndimage.map_coordinates() to transform the image 
  according to the transformed grid. This step includes (n-linear or higer 
  spline) interpolation.</p>
  <p>Note that in the default case (mode='constant') transformed values at 
  coordinates that are even tiny bit outside the original grid are set to 
  cval.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      array: array (image) to be transformed
    </li>
    <li>
      origin: (1d ndarray) coordinates of the rotation origin
    </li>
    <li>
      return_grid: flag indicating if the grid that was used to make this 
      transformation is also returned
    </li>
    <li>
      output, order, mode, cval, prefilter: arguments of 
      scipy.ndimage.map_coordinates() (see that function for detailed 
      info):
    </li>
    <li>
      order: spline order, default 1 (n-linear)
    </li>
    <li>
      prefilter: flag indicating if prefiltering is performed (needed for 
      splines), default False
    </li>
    <li>
      mode: how to deal with points outside boundaries, default 'constant'
    </li>
    <li>
      cval: outside value for mode 'constant'
    </li>
  </ul>
  <p>Returns:</p>
  <ul>
    <li>
      transformed array (image)
    </li>
    <li>
      (optional) grid used for the transformation
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_transformArray_old"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_transformArray_old</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">array</span>,
        <span class="sig-arg">origin</span>,
        <span class="sig-arg">return_grid</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">output</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">order</span>=<span class="sig-default">1</span>,
        <span class="sig-arg">mode</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">constant</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">cval</span>=<span class="sig-default">0.0</span>,
        <span class="sig-arg">prefilter</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine._transformArray_old">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Transformes the given array, typically an image (arg array) according 
  to the transformation of this instance. Rotation center is given by arg 
  origin.</p>
  <p>Uses transform() method to (inversly) transform the complete index 
  (coordinate) grid corresponding to the given array to make the 
  transformed grid.</p>
  <p>Then it calls scipy.ndimage.map_coordinates() to transform the image 
  according to the transformed grid. This step includes (n-linear or higer 
  spline) interpolation.</p>
  <p>Note that in the default case (mode='constant') transformed values at 
  coordinates that are even tiny bit outside the original grid are set to 
  cval.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      array: array (image) to be transformed
    </li>
    <li>
      origin: (1d ndarray) coordinates of the rotation origin
    </li>
    <li>
      return_grid: flag indicating if the grid that was used to make this 
      transformation is also returned
    </li>
    <li>
      output, order, mode, cval, prefilter: arguments of 
      scipy.ndimage.map_coordinates() (see that function for detailed 
      info):
    </li>
    <li>
      order: spline order, default 1 (n-linear)
    </li>
    <li>
      prefilter: flag indicating if prefiltering is performed (needed for 
      splines), default False
    </li>
    <li>
      mode: how to deal with points outside boundaries, default 'constant'
    </li>
    <li>
      cval: outside value for mode 'constant'
    </li>
  </ul>
  <p>Returns:</p>
  <ul>
    <li>
      transformed array (image)
    </li>
    <li>
      (optional) grid used for the transformation
    </li>
  </ul>
  <p>Note: To be removed</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="decompose"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">decompose</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">gl</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">order</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.decompose">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Decomposes gl using QR or singular value decomposition as follows:

  gl = q p s m (order 'qr' or 'qpsm') 
  gl = p s m q (order 'rq' or 'psmq')
  gl = u p s v (order 'usv')

where:
  - q, u, v: rotation matrix (orthogonal, with det +1)
  - p: parity matrix (diagonal, the element self.parity_axis can be +1 
  or -1, other diagonal elements +1)
  - s: scale martix, diagonal and &gt;=0
  - m: shear matrix, upper triangular, all diagonal elements 1

The order is determined by agr oder. In this case self order is set to
(arg) order). Otherwise, if arg order is None, self.order is used.

Arguments:
  - gl: (ndarray) general linear transformation, or self.gl if None
  - order: decomposition order 'qpsm' (same as 'qr'), 'psmq' (same as 
  'rq'), or 'usv'

If arg gl is None, self.gl us used and the matrices resulting from the 
decomposition are saved as the arguments of this instance:
  - self.q, self.p, self.s and self.m if order 'qpsm', 'qr', 'psmq' 
  or 'rq'
  - self.u, self.p, self.s, self.v if order 'usv'

Returns only if gl is not None:
  - (q, p, s, m) if order 'qpsm', 'qr', 'psmq' or 'rq'
  - (u, p, s, v) if order 'usv'

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="decomposeQR"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">decomposeQR</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">gl</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">order</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">qr</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.decomposeQR">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Decomposes gl using QR decomposition into:

  gl = q p s m (order 'qr' or 'qpsm') 
  gl = p s m q (order 'rq' or 'psmq')

where:
  - q: rotation (orthogonal, with det +1) matrix
  - p: parity (diagonal, all elements +1, except that the element 
  corresponding to self.parity_axismatrix can be -1)
  possibly -1
  - s: scale martix, diagonal and positive
  - m: shear matrix, upper triangular, all diagonal elements 1

Arguments:
  - gl: (ndarray) general linear transformation
  - order: decomposition order 'qr' or 'rq'

Returns: (q, p, s, m)

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="decomposeSV"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">decomposeSV</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">gl</span>,
        <span class="sig-arg">order</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">usv</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">correction</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">u</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.decomposeSV">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Decompose gl using singular value decomposition, so that:

  gl = u p s v

where:
  - u, v: rotational matrices (orthogonal, det +1)
  - p: parity (diagonal, all elements +1, except that the element 
  corresponding to self.parity_axis can be -1)
  - s: scale matrix (diagonal, all elements &gt; 0)

Arguments:
  - gl: general linear matrix
  - order: not implemented
  - correction: determines wheter u or v is adjusted in case p has
  more than one negative value

Returns: (u, p, s, v)

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="composeGl"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">composeGl</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">order</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">q</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">p</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">s</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">m</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">u</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">v</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.composeGl">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Makes general linear transformation matrix (inverse of 
  self.decompose()).</p>
  <p>If a parameter (q, p, s, m, u, or v) is not specified as argument, the
  corresponding attributes of this instance is used.</p>
  <p>If arg order is not specified, self.order is used.</p>
  <p>The parameters that are defined (passed as arguments or existing as 
  attributes of this instance) have to correspond to the order. For 
  example, if order is 'qpsm', parameters q, p, s and m have to be defined,
  or if order is 'usv' u, s, v and p have to be defined.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      q: rotation (orthogonal, with det 1) matrix
    </li>
    <li>
      p: parity matrix, that is identity matrix with last element possibly 
      -1
    </li>
    <li>
      s: scale martix, diagonal and positive
    </li>
    <li>
      m: shear matrix, upper triangular, all diagonal elements 1
    </li>
    <li>
      u, v: singular value decomposition matrices
    </li>
  </ul>
  <p>Returns gl</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="inverse"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">inverse</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">gl</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">d</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">subgl</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.inverse">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Finds inverse transformation of this instance or of the transformation
specified by args gl and d. Returns a new instance of this class.
The inverse is calculated as follows:

  g_inv = g^-1
  d_inv = -g_inv d

The error is calculated as:

  error_inv = -g_inv error

If gl is not specified, and if self.error exists, calculates
error for the inverse transformation.

If gl is None self.gl and self.d are used (argument d is ignored).

Arg subgl == 'q', should be used for the inverse of Rigid3D.

 Arguments:
  - gl: general linear transformation matrix
  - d: translation vector
  - subgl: specifies if argument different from gl is used to 
  instantiate the inverse class. None to use gl, 'q' to use q (for
  Rigid3D)

Returns: the inverted transformation

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="compose"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">compose</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">t_1</span>,
        <span class="sig-arg">t_2</span>,
        <span class="sig-arg">subgl</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.compose">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Finds composition of transformations t_1 and t_2. The resulting 
transformation is the same as if first t_2 was applied on initial 
coordinates, and then t_1 was applied.

The composition is calculated as follows:

  t_1 t_2 (x) = Gl_1 Gl_2 (x) + Gl_1 (d_2) + d_1

The estimated rms error of the composition is:

  sqrt(rms_1 ** 2 + (mean_scale_1 rms_2) ** 2)

where mean_scale_1 is the geometrical mean of all t_1 scales. It is 
saved as attribute rmsErrorEst, Attributes error and rmsError are not 
defined.

Arg subgl == 'q', should be used for the composition of two instances 
of Rigid3D.

Arguments:
  - t_1, t-2: transformation objects
  - subgl: specifies if argument different from gl is used to 
  instantiate the inverse class. None to use gl, 'q' to use q (for
  Rigid3D)

Returns:
  - new instance of this class that contains the composition

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="removeMasked"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">removeMasked</span>(<span class="sig-arg">cls</span>,
        <span class="sig-arg">arrays</span>,
        <span class="sig-arg">masks</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">Class Method</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.geometry.affine-pysrc.html#Affine.removeMasked">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Makes a mask that combine all masks and removes points from arrays 
  that are masked by the mask.</p>
  <p>Arrays is a list of, a tuple of, or a single array, each containing 
  coordinates of n_points points.</p>
  <p>Masks are a list of, a tuple of, or a single vector, each containing a
  mask for a respective element of arrays. Mask entry 0 means not masked, 
  and 1 masked. If masks or any mask is None, it is understood as no 
  mask.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      list of, tuple of, or single array, shape (n_points, ndim)
    </li>
    <li>
      list of, tuple of, or single vector, length n_points
    </li>
  </ul>
  <p>Returns (arrays, mask):</p>
  <ul>
    <li>
      list of, or a single array (depending on the argument) or
    </li>
    <li>
      mask: combined mask (x_mask | y_mask)
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== PROPERTY DETAILS ==================== -->
<a name="section-PropertyDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Property Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-PropertyDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="ndim"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">ndim</h3>
  <p>N dimensions</p>
  <dl class="fields">
    <dt>Get Method:</dt>
    <dd class="value"><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#getNdim" class="summary-sig-name">getNdim</a>(<span class="summary-sig-arg">self</span>)</span>
    </dd>
    <dt>Set Method:</dt>
    <dd class="value"><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#setNdim" class="summary-sig-name">setNdim</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">ndim</span>)</span>
        - Sets ndim
    </dd>
  </dl>
</td></tr></table>
</div>
<a name="scale"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">scale</h3>
  <p>scale</p>
  <dl class="fields">
    <dt>Get Method:</dt>
    <dd class="value"><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#getScale" class="summary-sig-name">getScale</a>(<span class="summary-sig-arg">self</span>)</span>
        - Extracts and returns scale.
    </dd>
    <dt>Set Method:</dt>
    <dd class="value"><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#setScale" class="summary-sig-name">setScale</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">scale</span>)</span>
        - Sets scale and (re)composes Gl with all other parameters unchanged
    </dd>
  </dl>
</td></tr></table>
</div>
<a name="parity"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">parity</h3>
  <p>Parity</p>
  <dl class="fields">
    <dt>Get Method:</dt>
    <dd class="value"><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#getParity" class="summary-sig-name">getParity</a>(<span class="summary-sig-arg">self</span>)</span>
        - Extracts and returns parity.
    </dd>
  </dl>
</td></tr></table>
</div>
<a name="translation"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">translation</h3>
  <p>Translation.</p>
  <dl class="fields">
    <dt>Get Method:</dt>
    <dd class="value"><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#getTranslation" class="summary-sig-name">getTranslation</a>(<span class="summary-sig-arg">self</span>)</span>
        - Translation vector.
    </dd>
  </dl>
</td></tr></table>
</div>
<a name="rmsError"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">rmsError</h3>
  <p>Root mean square error</p>
  <dl class="fields">
    <dt>Get Method:</dt>
    <dd class="value"><span class="summary-sig"><a href="pyto.geometry.affine.Affine-class.html#getRMSError" class="summary-sig-name">getRMSError</a>(<span class="summary-sig-arg">self</span>)</span>
        - Root mean square of the error.
    </dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pyto-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Pyto</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    on Thu Nov  8 16:54:04 2018
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
