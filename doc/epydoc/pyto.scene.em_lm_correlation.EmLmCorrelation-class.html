<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pyto.scene.em_lm_correlation.EmLmCorrelation</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pyto-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Pyto</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pyto-module.html">Package&nbsp;pyto</a> ::
        <a href="pyto.scene-module.html">Package&nbsp;scene</a> ::
        <a href="pyto.scene.em_lm_correlation-module.html">Module&nbsp;em_lm_correlation</a> ::
        Class&nbsp;EmLmCorrelation
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class EmLmCorrelation</h1><p class="nomargin-top"><span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation">source&nbsp;code</a></span></p>
<center>
<center>  <map id="uml_class_diagram_for_pyto_sce_2" name="uml_class_diagram_for_pyto_sce_2">
<area shape="rect" id="node1_4" href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html#__init__" title="Initializes attributes." alt="" coords="17,38,1489,58"/>
<area shape="rect" id="node1_5" href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html#establish" title="Establishes transformation from LM to EM search mode." alt="" coords="17,58,1489,78"/>
<area shape="rect" id="node1_6" href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html#decompose" title="Decomposes all three transformations." alt="" coords="17,78,1489,98"/>
<area shape="rect" id="node1_7" href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html#readPositions" title="Reads positions (specified by arg specs) and sets them as attributes &#160;of this instance." alt="" coords="17,98,1489,118"/>
<area shape="rect" id="node1" href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html" title="pyto.scene.em_lm_correlation.EmLmCorrelation" alt="" coords="5,5,1501,124"/>
</map>
  <img src="uml_class_diagram_for_pyto_sce_2.gif" alt='' usemap="#uml_class_diagram_for_pyto_sce_2" ismap="ismap" class="graph-without-title" />
</center>
</center>
<hr />
<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">mode</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">lmMarkers</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">lmMarkersGl</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">lmMarkersD</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">overviewMarkers</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">overviewMarkersGl</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">overviewMarkersD</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">overviewDetail</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">searchDetail</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">searchMain</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">overviewCenter</span>=<span class="summary-sig-default">None</span>)</span><br />
      Initializes attributes.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html#establish" class="summary-sig-name">establish</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">lm2overviewType</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">gl</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">overview2searchType</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">rs</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">order</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">qpsm</code><code class="variable-quote">'</code></span>)</span><br />
      Establishes transformation from LM to EM search mode.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation.establish">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html#decompose" class="summary-sig-name">decompose</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">order</span>)</span><br />
      Decomposes all three transformations.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation.decompose">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.scene.em_lm_correlation.EmLmCorrelation-class.html#readPositions" class="summary-sig-name">readPositions</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">specs</span>,
        <span class="summary-sig-arg">format</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">imagej</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">xyColumns</span>=<span class="summary-sig-default">None</span>)</span><br />
      Reads positions (specified by arg specs) and sets them as attributes 
of this instance.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation.readPositions">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__format__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__sizeof__</code>,
      <code>__str__</code>,
      <code>__subclasshook__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">mode</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">lmMarkers</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">lmMarkersGl</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">lmMarkersD</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">overviewMarkers</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">overviewMarkersGl</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">overviewMarkersD</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">overviewDetail</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">searchDetail</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">searchMain</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">overviewCenter</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation.__init__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Initializes attributes.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      mode: establishing LM to EM overview transformation mode: 'move 
      search' or 'move overview'
    </li>
    <li>
      lmMarkers, overviewMarkers (ndarrays of shape (n_markers, 2)): 
      positions of markers in LM and EM overview
    </li>
    <li>
      lmMarkersGl, lmMarkersD, overviewMarkersGl, overviewMarkersD 
      (ndarrays of shape (n_markers, 2)): positions of markers in LM and EM
      overview for the case where the Gl and the translation parts of the 
      transformation are calculated separately
    </li>
    <li>
      overviewDetails, searchDetails: positions of detail in EM overview 
      and search modes
    </li>
    <li>
      searchMain: search coordinates of the overview image used for LM - EM
      overview correlation. Needed for 'move overview' mode only.
    </li>
    <li>
      overviewCenter: coordinates of a correlated spot at an image taken at
      the overview magnification and at the corresponding correlated stage 
      position (typically the center of the overview image). Needed for 
      'move overview' mode only.
    </li>
  </ul>
  <dl class="fields">
    <dt>Overrides:
        object.__init__
    </dt>
  </dl>
</td></tr></table>
</div>
<a name="establish"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">establish</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">lm2overviewType</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">gl</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">overview2searchType</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">rs</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">order</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">qpsm</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation.establish">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Establishes transformation from LM to EM search mode.</p>
  <p>Reguires marker coordinates in LM and EM overview, coordinates of 
  detail in EM overview and search, mode and index of the main detail (if 
  mode is 'move overview' to be set as attributes, by __init__ for 
  example.</p>
  <p>In the usual (direct) way the lm to overview transformation is 
  calculated directly from self.lmMarkers and self.overviewMarkers 
  attributes.</p>
  <p>Alternatively, if self.lmMarkersGl, self.lmMarkersD, overviewMarkersGl
  and self.overviewMarkersD are specified, first the gl part of the 
  transformation is calculated from the above attributes ending in 'Gl' and
  then the translation is calculated from the attributes ending in 'd'. The
  final transformation is the a composition of these two transformation. In
  this case error can not be calculated directly (as in the direct case) so
  the individual transformation errors are saved as errorGL and errorD 
  attributes of the final transformation (self.lm2overview). The rms error 
  is calculated for the final transformation.</p>
  <p>Either self.lmMarkers and self.overviewMarkers or self.lmMarkersGl, 
  self.lmMarkersD, overviewMarkersGl and self.overviewMarkersD have to be 
  specified.</p>
  <p>Argument:</p>
  <ul>
    <li>
      lm2overviewType: type of transformation from LM to EM overview, 'gl' 
      for general linear or 'rs' for rotation and sigle scaling
    </li>
    <li>
      overview2searchType: type of transformation from EM overview to 
      search, 'gl' for general linear or 'rs' for rotation and sigle 
      scaling
    </li>
  </ul>
  <p>Sets:</p>
  <ul>
    <li>
      lm2overview: (Affine2D) LM to EM overview transformation
    </li>
    <li>
      overview2search: (Affine2D) EM overview to search transformation
    </li>
    <li>
      lm2search: (Affine2D_ LM to EM search transformation
    </li>
    <li>
      order: decomposition order, 'qpsm', 'psmq' or 'uqv' (see 
      ..geometry.Affine.decompose for details)
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="decompose"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">decompose</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">order</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation.decompose">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Decomposes all three transformations.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      order: decomposition order, 'qpsm', 'psmq' or 'uqv' (see 
      ..geometry.Affine.decompose for details)
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="readPositions"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">readPositions</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">specs</span>,
        <span class="sig-arg">format</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">imagej</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">xyColumns</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.scene.em_lm_correlation-pysrc.html#EmLmCorrelation.readPositions">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Reads positions (specified by arg specs) and sets them as attributes 
of this instance.

Names of the attributes that are set by this method are specified as
keys of arg specs (dictionary). Each value of specs is a tuple that
contains the file name and the list of rows (line numbers) that 
contains coordinates that should be read. 

Note that rows are counted starting with 0, but disregarding comment 
lines. If rows is None or it doesn't exist all rows are read.

For example, if:

  specs = {'lmMarkers' : ('marker_file.txt', [7, 8]),
           'overviewMarkers' : ('marker_file.txt', [1, 2])}

and marker_file.txt (generated by ImageJ):

        Label           X       Y       Z       Value   
  1     129+7_220_kink  724     647     0       32774   
  2     129+7_220_kink  828     608     0       32776   
  3     129+7_220_kink  776     804     0       32770   
  4     129+7_220_kink  256     839     0       32774   
  5     129+7_220_kink  36      351     0       32771   
  7     129+7_220_kink  190     460     0       32777   
  8     Stack:8 1.673   1.907   7       1399    
  9     Stack:8 1.680   1.787   7       993     
  10    Stack:8 1.867   1.913   7       1130    

  self.readPositions(specs=specs, format='imagej', xyColumns=[2, 3])

will set the following attributes:

  self.lmMarkers = numpy.array([[1.680  1.787],
                                [1.867  1.913]])
  self.overviewMarkers = numpy.array([[828      608],
                                      [776      804]])

Arguments:
  - specs: (dict) specifies the file location of positions to be read
  and the names of attributes where the read positions should be stored
  - format: format of file(s) specified in arg specs; currently only
  'imagej' (for files generated by ImageJ
  - xyColumns: (list of length 2), columns containing x and y 
  coordinates (numbering starts with 0) 

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pyto-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Pyto</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    on Thu Nov  8 16:54:04 2018
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
