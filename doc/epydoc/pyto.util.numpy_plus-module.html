<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>pyto.util.numpy_plus</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pyto-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Pyto</th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="pyto-module.html">Package&nbsp;pyto</a> ::
        <a href="pyto.util-module.html">Package&nbsp;util</a> ::
        Module&nbsp;numpy_plus
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="pyto.util.numpy_plus-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module numpy_plus</h1><p class="nomargin-top"><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html">source&nbsp;code</a></span></p>
<p>Numpy related utility functions.</p>
  <p>ToDo:</p>
  <ul>
    <li>
      see if label_ids, remove_labels and keep_labels should be removed.
    </li>
    <li>
      not sure if intersect_arrays, intersect_slices and trim_slices are 
      made redundant by positioning in core.Image.
    </li>
  </ul>
  <p># Author: Vladan Lucic, Max Planck Institute for Biochemistry # $Id: 
  numpy_plus.py 880 2012-06-10 15:10:15Z vladan $</p>

<hr />
<div class="fields">      <p><strong>Version:</strong>
        $Revision: 880 $
      </p>
</div><!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.util.numpy_plus-module.html#intersect_arrays" class="summary-sig-name">intersect_arrays</a>(<span class="summary-sig-arg">shape_1</span>,
        <span class="summary-sig-arg">shape_2</span>,
        <span class="summary-sig-arg">offset_1</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">offset_2</span>=<span class="summary-sig-default">None</span>)</span><br />
      Finds intersection of two (N-dim) arrays represented by their shapes 
      and by offsets to some common origin.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#intersect_arrays">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.util.numpy_plus-module.html#intersect_slices" class="summary-sig-name">intersect_slices</a>(<span class="summary-sig-arg">slice_1</span>,
        <span class="summary-sig-arg">slice_2</span>)</span><br />
      Finds intersection of n-dim slices slice_1 and slice_2.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#intersect_slices">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.util.numpy_plus-module.html#trim_slice" class="summary-sig-name">trim_slice</a>(<span class="summary-sig-arg">slice_nd</span>,
        <span class="summary-sig-arg">shape</span>)</span><br />
      Makes intersection of an array (defined by arg shape) with a slice (arg 
slice_nd).</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#trim_slice">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.util.numpy_plus-module.html#label_ids" class="summary-sig-name">label_ids</a>(<span class="summary-sig-arg">array</span>)</span><br />
      Returns (sorted ndarray of) unique positive elements of array.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#label_ids">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.util.numpy_plus-module.html#remove_labels" class="summary-sig-name">remove_labels</a>(<span class="summary-sig-arg">array</span>,
        <span class="summary-sig-arg">ids</span>,
        <span class="summary-sig-arg">value</span>=<span class="summary-sig-default">0</span>)</span><br />
      Removes from array all elements that equal any of ids.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#remove_labels">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.util.numpy_plus-module.html#keep_labels" class="summary-sig-name">keep_labels</a>(<span class="summary-sig-arg">array</span>,
        <span class="summary-sig-arg">keep</span>,
        <span class="summary-sig-arg">value</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">all</span>=<span class="summary-sig-default">None</span>)</span><br />
      Keep only those elements of array that equal one of elements of keep.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#keep_labels">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.util.numpy_plus-module.html#wvar" class="summary-sig-name">wvar</a>(<span class="summary-sig-arg">array</span>,
        <span class="summary-sig-arg">weight</span>,
        <span class="summary-sig-arg">ddof</span>=<span class="summary-sig-default">0</span>)</span><br />
      Weighted variance of array:</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#wvar">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="pyto.util.numpy_plus-module.html#update" class="summary-sig-name">update</a>(<span class="summary-sig-arg">a</span>,
        <span class="summary-sig-arg">b</span>,
        <span class="summary-sig-arg">mask</span>,
        <span class="summary-sig-arg">value</span>=<span class="summary-sig-default">0</span>)</span><br />
      Replaces elements of array a with elements of array b where mask is 
      True.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#update">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'pyto.util'"><code class="variable-quote">'</code><code class="variable-string">pyto.util</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="intersect_arrays"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">intersect_arrays</span>(<span class="sig-arg">shape_1</span>,
        <span class="sig-arg">shape_2</span>,
        <span class="sig-arg">offset_1</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">offset_2</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#intersect_arrays">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Finds intersection of two (N-dim) arrays represented by their shapes 
  and by offsets to some common origin.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      shape_1, shape_2: shapes of the arrays
    </li>
    <li>
      offset_1, offset_2: array offsets to a common origin
    </li>
  </ul>
  <p>Returns (slice_1, slice_2, offset)</p>
  <ul>
    <li>
      slice_1, slice_2: slices defining the intersection
    </li>
    <li>
      offset: offset of the intersection. Meaningles if the arrays do not 
      intersect.
    </li>
  </ul>
  <p>Note: should probably use trim_slices or intersect_slicesinstead.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="intersect_slices"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">intersect_slices</span>(<span class="sig-arg">slice_1</span>,
        <span class="sig-arg">slice_2</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#intersect_slices">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Finds intersection of n-dim slices slice_1 and slice_2.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      slice_1, slice_2: tuple or list of slices (one element for each 
      dimension)
    </li>
  </ul>
  <p>Returns</p>
  <ul>
    <li>
      slice: tuple containing intersecting slices (one element for each 
      dimension)
    </li>
  </ul>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="trim_slice"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">trim_slice</span>(<span class="sig-arg">slice_nd</span>,
        <span class="sig-arg">shape</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#trim_slice">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Makes intersection of an array (defined by arg shape) with a slice (arg 
slice_nd).

This method is useful for operations between two non-overlaping arrays.
This can happen when the two arrays have different shapes, or when one is 
moved to a specific position with respect to the other one.

For example, the following line adds an array ar_2 to array ar_1 at the
position given by n-dim slice sl (assuming that ar_2.shape is consistent
with sl):

  ar_1[slice_nd] + ar_2

However, this doesn't work if slice_nd &quot;sticks out&quot; of ar_1. The remedy is
to use this function:

  new_slice, other_slice = trim_slice(slice_nd, ar_1.shape)
  ar_1[new_slice] + ar_2[other_slice]

Note that not only ar1 may need to be sliced but also ar2 may need to.

Slice start and stop may be negative integers, in which case they are 
considered simply to start (stop) before the beginning of the array ar_1, 
and not the way negative indices are normally used in lists and arrays.  

If the two arrays do not overlap, Null is returned for each dimension.

Arguments:
  - sl: tuple or list of slices (one element for each dimension)
  - shape: shape in which modified sl (new_slice) should fit

Return:
  - new_slice: tuple of trimmed slices (one element for each dimension)
  - other_slice: slice that needs to be applied to 

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="label_ids"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">label_ids</span>(<span class="sig-arg">array</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#label_ids">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Returns (sorted ndarray of) unique positive elements of array.</p>
  <p>Made obsolete by segment.extractIds?</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="remove_labels"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">remove_labels</span>(<span class="sig-arg">array</span>,
        <span class="sig-arg">ids</span>,
        <span class="sig-arg">value</span>=<span class="sig-default">0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#remove_labels">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Removes from array all elements that equal any of ids.</p>
  <p>Made obsolete by segment.remove?</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="keep_labels"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">keep_labels</span>(<span class="sig-arg">array</span>,
        <span class="sig-arg">keep</span>,
        <span class="sig-arg">value</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">all</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#keep_labels">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Keep only those elements of array that equal one of elements of keep. 
  The remaining elements are set to value.</p>
  <p>Made obsolete by segment.keep?</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="wvar"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">wvar</span>(<span class="sig-arg">array</span>,
        <span class="sig-arg">weight</span>,
        <span class="sig-arg">ddof</span>=<span class="sig-default">0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#wvar">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">

Weighted variance of array:

  sum(weight_i (array_i - array_w_mean)^2) / (len(array) - ddof)

Arguments:
  - array: 1d array
  - weight: (1d array) weights
  - ddof: delta degrees of freedom

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="update"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">update</span>(<span class="sig-arg">a</span>,
        <span class="sig-arg">b</span>,
        <span class="sig-arg">mask</span>,
        <span class="sig-arg">value</span>=<span class="sig-default">0</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="pyto.util.numpy_plus-pysrc.html#update">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Replaces elements of array a with elements of array b where mask is 
  True.</p>
  <p>The shape of resulting array (allways a new array) is extended to fit 
  b. Elements that are created by this extension are set to value.</p>
  <p>Arguments:</p>
  <ul>
    <li>
      a: array to be updated
    </li>
    <li>
      b: update array
    </li>
    <li>
      mask: (boolean array of the same shape as b) indicates which elements
      of b are used for updating
    </li>
    <li>
      value: value for padding new elements
    </li>
  </ul>
  <p>Returns: array of the shape obtained form max shape of a and b in each
  dimension.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="pyto-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            >Pyto</th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1
    on Thu Nov  8 16:54:04 2018
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
